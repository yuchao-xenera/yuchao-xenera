<!DOCTYPE html>
<html>

<head>
    <meta charset='UTF-8' />
    <title>作业</title>
    <!-- 引入react核心库 -->
    <script src='https://unpkg.com/react@17/umd/react.development.js'></script>
    <!-- 引入react-dom,用于支撑react操作DOM -->
    <script src='https://unpkg.com/react-dom@17/umd/react-dom.development.js'></script>
    <!-- 引入babel，用于将jxs转化为js -->
    <script src='https://unpkg.com/@babel/standalone/babel.min.js'></script>
    <!-- 引入prop-types,用于对标签属性进行限制 -->
    <script src='https://cdn.bootcdn.net/ajax/libs/prop-types/15.7.2/prop-types.js'></script>
</head>

<body>
    <div id="root"></div>
    <script type='text/babel'>
        class Input extends React.Component {
            all = [];
            state = {
                input1: "",
                input2: "",
                // data:["aaa","bbb","ccc"],
                data: []
            }
            render() {
                return (
                    <div>
                        <form onSubmit={this.submit}>
                            <div>输入内容一：<input type="text" value={this.state.input1} onChange={this.save('input1')} /></div>
                            <div>输入内容二：<input type="text" value={this.state.input2} onChange={this.save('input2')} /></div>
                            <div><button>点击</button></div>
                        </form>
                        <Output data={this.state.data} />
                    </div>
                )
            }

            save = (type) =>{
                return (event) => {
                    // if(type === "input1"){
                    //     this.input1 = event
                    // }else if(type === "input2"){
                    //     this.input2 = event
                    // }
                
                    // this.all.push(event)
                    this.setState({[type]:event.target.value})
                }
            }
            
            submit = (event) => {
                // this.input1.target.value=""
                // this.input2.target.value=""
                
                // this.all.map(item => item.target.value="")
                

                event.preventDefault()
                const { input1, input2 } = this.state
                
                if (input1 !== "" && input2 !== "") {
                    const temporary = this.state.data
                    temporary.push(input1)
                    temporary.push(input2)
                    this.setState({ data: temporary })
                }else{
                    alert("输入内容不能为空")
                }
                this.state.input1=""
                this.state.input2=""
            }
        }

        class Output extends React.Component {
            render() {
                return (
                    <ul>
                        <h2>以下为输出的数据</h2>
                        {
                            this.props.data.length === 0?"当前没有数据":
                            this.props.data.map((item, index) => {
                                return (
                                    <span key={index}><li key={index}>{item}</li></span>
                                )
                            })
                        }
                    </ul>
                )
            }
        }

        ReactDOM.render(
            <Input />,
            document.getElementById('root')
        )
    </script>
</body>

</html>