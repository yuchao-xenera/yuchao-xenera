<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>hello</title>
    <script src="https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"></script>
    <script src="https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script>
</head>
<body>    
    <div id="test"></div>
    <script type="text/babel">
    class Comment extends React.Component{
        state={
            username:'',
            comment:'',
            list:[]
        }
        render(){
            const {username,comment}=this.state
            return(
                <div>
                    <div className="comment">
                        评论者
                        <input type="text" style={{width:'280px',height:'30px'}} value={username} onChange={this.saveInfo('username')}/>
                        评论语
                        <textarea name="" id="" cols="39" rows="10" value={comment} onChange={this.saveInfo('comment')}></textarea>
                        <button onClick={this.addComment}>发表评论</button>
                        <br></br>
                    </div>
                    <div>                    
                        <Comments list={this.state.list}/>
                    </div>
                </div>
            )
        }
        saveInfo = (type)=>{
            return (event)=>{
                this.setState({[type]:event.target.value})
            }
        }
        addComment=()=>{
            const {username,comment,list}=this.state
            const str={
                username:username,
                comment:comment
            }
            console.log(str)        
            list.push(str)
            this.setState({
                username:'',
                comment:'',
                list:list})
            console.log(this.state.list)
        }
    }
    class Comments extends React.Component{
        render(){
            return(            
                <div>
                    评论内容
                    <ul>
                        { this.props.list.length>0 ? this.props.list.map((item,index)=><li key={index}> {item.username+"-----"+item.comment}</li>):'暂无评论内容'}
                    </ul>
                </div>
            )
        }
    }
    ReactDOM.render(<Comment/>,document.getElementById('test'))
    </script>
</body>
<style>
    .comment{
        background-color: rgba(0, 0, 255, 0.568);
        width: 300px;
        height: 300px;
    }
</style>
</html>